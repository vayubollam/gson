import java.text.SimpleDateFormat

// This gradle scripts generates a "unique" version code for our release versions.
//
// The version code is composed like: yyDDDHHmm
//  * y   = Double digit year
//  * DDD = Day of the year, pad with zeros if needed: September 6th -> 249
//  * HH  = Hour in day (00-23)
//  * mm  = Minute in hour

ext {
    def today = new Date()

    def yearMonDay = new SimpleDateFormat("yyyyMMdd")
    yearMonDay.setTimeZone(TimeZone.getTimeZone("EST"))

    def hours = new SimpleDateFormat("HH")
    hours.setTimeZone(TimeZone.getTimeZone("EST"))

    generatedVersionCode = (yearMonDay.format(today) + hours.format(today)) as int

    println("Generated versionCode: $generatedVersionCode")
}